{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import'../css/AddMenuModal.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddMenuModal=_ref=>{let{onClose,onComplete}=_ref;const[name,setName]=useState('');const[code,setCode]=useState('');const[imgFile,setImgFile]=useState(null);const modalRef=useRef();const REST=process.env.REACT_APP_REST;useEffect(()=>{const handleClickOutside=e=>{if(modalRef.current&&!modalRef.current.contains(e.target)){onClose();}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[onClose]);const handleSubmit=async e=>{e.preventDefault();const formData=new FormData();formData.append('name',name);formData.append('code',code);formData.append('img',imgFile);try{const res=await fetch(`${REST}/admin/addmenu`,{method:'POST',body:formData});if(res.ok){alert('등록 완료!');onClose();if(onComplete)onComplete();// ✅ 등록 후 부모에서 리스트 갱신\n}else{alert('등록 실패');}}catch(err){console.error('에러:',err);}};return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",ref:modalRef,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uBA54\\uB274 \\uCD94\\uAC00\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uBA54\\uB274\\uBA85\",value:name,onChange:e=>setName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uBA54\\uB274\\uCF54\\uB4DC\",value:code,onChange:e=>setCode(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:e=>setImgFile(e.target.files[0]),required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\uB4F1\\uB85D\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,children:\"\\uCDE8\\uC18C\"})]})]})]})});};export default AddMenuModal;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","AddMenuModal","_ref","onClose","onComplete","name","setName","code","setCode","imgFile","setImgFile","modalRef","REST","process","env","REACT_APP_REST","handleClickOutside","e","current","contains","target","document","addEventListener","removeEventListener","handleSubmit","preventDefault","formData","FormData","append","res","fetch","method","body","ok","alert","err","console","error","className","children","ref","onSubmit","type","placeholder","value","onChange","required","accept","files","onClick"],"sources":["C:/Users/admin/Documents/kiosk/kiosk_admin_front/src/util/AddMenuModal.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport '../css/AddMenuModal.css';\r\n\r\nconst AddMenuModal = ({ onClose, onComplete }) => {\r\n  const [name, setName] = useState('');\r\n  const [code, setCode] = useState('');\r\n  const [imgFile, setImgFile] = useState(null);\r\n  const modalRef = useRef();\r\n  const REST = process.env.REACT_APP_REST;\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (modalRef.current && !modalRef.current.contains(e.target)) {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [onClose]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n    formData.append('name', name);\r\n    formData.append('code', code);\r\n    formData.append('img', imgFile);\r\n\r\n    try {\r\n      const res = await fetch(`${REST}/admin/addmenu`, {\r\n        method: 'POST',\r\n        body: formData\r\n      });\r\n\r\n      if (res.ok) {\r\n        alert('등록 완료!');\r\n        onClose();\r\n        if (onComplete) onComplete(); // ✅ 등록 후 부모에서 리스트 갱신\r\n      } else {\r\n        alert('등록 실패');\r\n      }\r\n    } catch (err) {\r\n      console.error('에러:', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"modal-content\" ref={modalRef}>\r\n        <h2>메뉴 추가</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"메뉴명\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            required\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"메뉴코드\"\r\n            value={code}\r\n            onChange={(e) => setCode(e.target.value)}\r\n            required\r\n          />\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={(e) => setImgFile(e.target.files[0])}\r\n            required\r\n          />\r\n          <div className=\"modal-buttons\">\r\n            <button type=\"submit\">등록하기</button>\r\n            <button type=\"button\" onClick={onClose}>취소</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddMenuModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}