{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import'../css/Pay.css';import DateFilter from'../DateFilter';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Pay=()=>{const[payList,setPayList]=useState([]);const REST=process.env.REACT_APP_REST;const navigate=useNavigate();const[showDateFilter,setShowDateFilter]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[sortOrder,setSortOrder]=useState('desc');const[filterPlaces,setFilterPlaces]=useState([]);const[placeNames,setPlaceNames]=useState([]);const handleDataSubmit=(filteredData,sortOrder)=>{setSortOrder(sortOrder);setPayList(filteredData);setShowDateFilter(false);};// 결제 내역 불러오기\nuseEffect(()=>{fetch(`${REST}/api/pay/list`).then(res=>res.json()).then(data=>{console.log('결제 목록:',data);setPayList(data);}).catch(err=>{console.error('결제 리스트 불러오기 실패:',err);});},[]);// 지점 목록 불러오기\nuseEffect(()=>{fetch(`${REST}/api/place/getnames`).then(res=>res.json()).then(data=>{console.log('지점 목록:',data);setPlaceNames(data);}).catch(err=>console.error('지점 목록 가져오기 실패:',err));},[]);// 필터링\nconst filterPayList=payList.filter(item=>{var _item$size,_searchTerm$toLowerCa;return(_item$size=item.size)===null||_item$size===void 0?void 0:_item$size.toLowerCase().includes((_searchTerm$toLowerCa=searchTerm===null||searchTerm===void 0?void 0:searchTerm.toLowerCase())!==null&&_searchTerm$toLowerCa!==void 0?_searchTerm$toLowerCa:'');}).filter(item=>{if(filterPlaces.length>0){return filterPlaces.includes(item.pay_place);}return true;}).sort((a,b)=>{const dateA=new Date(a.pay_date);const dateB=new Date(b.pay_date);return sortOrder==='desc'?dateB-dateA:dateA-dateB;});const handlePlaceFilter=place=>{setFilterPlaces(prev=>prev.includes(place)?prev.filter(p=>p!==place):[...prev,place]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"pay-container\",children:[showDateFilter&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"overlay\",onClick:()=>setShowDateFilter(false)}),/*#__PURE__*/_jsx(DateFilter,{onSubmit:handleDataSubmit,setShowDateFilter:setShowDateFilter})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pay-filters\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"date-btn\",onClick:()=>setShowDateFilter(true),children:\"DATE\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uBA54\\uB274\\uBA85\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"search-input\"}),placeNames.map(placeName=>/*#__PURE__*/_jsx(\"button\",{className:`place-btn ${filterPlaces.includes(placeName)?'selected':''}`,onClick:()=>handlePlaceFilter(placeName),children:placeName},placeName))]}),/*#__PURE__*/_jsxs(\"table\",{className:\"pay-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"NO\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uACB0\\uC81C\\uC218\\uB2E8\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uACB0\\uC81C\\uB0B4\\uC5ED\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uACB0\\uC81C\\uAE08\\uC561\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uACB0\\uC81C\\uC77C\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uACB0\\uC81C\\uC9C0\\uC810\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uACB0\\uC81C\\uC77C\\uB828\\uBC88\\uD638\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filterPayList.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{onClick:()=>navigate(`/pay/${item.pay_num}`),children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:item.pay_method}),/*#__PURE__*/_jsx(\"td\",{children:item.size}),/*#__PURE__*/_jsx(\"td\",{children:item.price.toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:item.pay_date}),/*#__PURE__*/_jsx(\"td\",{children:item.pay_place}),/*#__PURE__*/_jsx(\"td\",{children:item.pay_num})]},item.id))})]})]});};export default Pay;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","DateFilter","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Pay","payList","setPayList","REST","process","env","REACT_APP_REST","navigate","showDateFilter","setShowDateFilter","searchTerm","setSearchTerm","sortOrder","setSortOrder","filterPlaces","setFilterPlaces","placeNames","setPlaceNames","handleDataSubmit","filteredData","fetch","then","res","json","data","console","log","catch","err","error","filterPayList","filter","item","_item$size","_searchTerm$toLowerCa","size","toLowerCase","includes","length","pay_place","sort","a","b","dateA","Date","pay_date","dateB","handlePlaceFilter","place","prev","p","className","children","onClick","onSubmit","type","placeholder","value","onChange","e","target","map","placeName","index","pay_num","pay_method","price","toLocaleString","id"],"sources":["C:/Users/admin/Documents/kiosk/kiosk_admin_front/src/pages/Pay.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../css/Pay.css';\r\nimport DateFilter from '../DateFilter';\r\n\r\nconst Pay = () => {\r\n  const [payList, setPayList] = useState([]);\r\n  const REST = process.env.REACT_APP_REST;\r\n  const navigate = useNavigate();\r\n  const [showDateFilter, setShowDateFilter] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortOrder, setSortOrder] = useState('desc');\r\n  const [filterPlaces, setFilterPlaces] = useState([]);\r\n  const [placeNames, setPlaceNames] = useState([]);\r\n\r\n  const handleDataSubmit = (filteredData, sortOrder) => {\r\n    setSortOrder(sortOrder);\r\n    setPayList(filteredData);\r\n    setShowDateFilter(false);\r\n  };\r\n\r\n  // 결제 내역 불러오기\r\n  useEffect(() => {\r\n    fetch(`${REST}/api/pay/list`)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log('결제 목록:', data);\r\n        setPayList(data);\r\n      })\r\n      .catch((err) => {\r\n        console.error('결제 리스트 불러오기 실패:', err);\r\n      });\r\n  }, []);\r\n\r\n  // 지점 목록 불러오기\r\n  useEffect(() => {\r\n    fetch(`${REST}/api/place/getnames`)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log('지점 목록:', data);\r\n        setPlaceNames(data);\r\n      })\r\n      .catch((err) => console.error('지점 목록 가져오기 실패:', err));\r\n  }, []);\r\n\r\n  // 필터링\r\n  const filterPayList = payList\r\n  .filter((item) =>\r\n    item.size?.toLowerCase().includes(searchTerm?.toLowerCase() ?? '')\r\n  )\r\n  .filter((item) => {\r\n    if (filterPlaces.length > 0) {\r\n      return filterPlaces.includes(item.pay_place);\r\n    }\r\n    return true;\r\n  })\r\n  .sort((a, b) => {\r\n    const dateA = new Date(a.pay_date);\r\n    const dateB = new Date(b.pay_date);\r\n    return sortOrder === 'desc' ? dateB - dateA : dateA - dateB;\r\n  });\r\n\r\n\r\n  const handlePlaceFilter = (place) => {\r\n    setFilterPlaces((prev) =>\r\n      prev.includes(place) ? prev.filter((p) => p !== place) : [...prev, place]\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"pay-container\">\r\n      {/* ✅ DateFilter 모달 */}\r\n      {showDateFilter && (\r\n        <>\r\n          <div className=\"overlay\" onClick={() => setShowDateFilter(false)}></div>\r\n            <DateFilter onSubmit={handleDataSubmit} setShowDateFilter={setShowDateFilter} />\r\n        </>\r\n      )}\r\n\r\n      {/* ✅ 필터 영역 */}\r\n      <div className=\"pay-filters\">\r\n        <button className=\"date-btn\" onClick={() => setShowDateFilter(true)}>DATE</button>\r\n\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"메뉴명을 입력해주세요.\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          className=\"search-input\"\r\n        />\r\n\r\n        {placeNames.map((placeName) => (\r\n          <button\r\n            key={placeName}\r\n            className={`place-btn ${filterPlaces.includes(placeName) ? 'selected' : ''}`}\r\n            onClick={() => handlePlaceFilter(placeName)}\r\n          >\r\n            {placeName}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* ✅ 테이블 */}\r\n      <table className=\"pay-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>NO</th>\r\n            <th>결제수단</th>\r\n            <th>결제내역</th>\r\n            <th>결제금액</th>\r\n            <th>결제일</th>\r\n            <th>결제지점</th>\r\n            <th>결제일련번호</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {filterPayList.map((item, index) => (\r\n            <tr key={item.id} onClick={() => navigate(`/pay/${item.pay_num}`)}>\r\n              <td>{index + 1}</td>\r\n              <td>{item.pay_method}</td>\r\n              <td>{item.size}</td>\r\n              <td>{item.price.toLocaleString()}</td>\r\n              <td>{item.pay_date}</td>\r\n              <td>{item.pay_place}</td>\r\n              <td>{item.pay_num}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pay;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}